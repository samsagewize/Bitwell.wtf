<!DOCTYPE html>
<html>
<head>
  <title>Bitwell 1.2</title>
  <style>
    textarea {
      width: 100%;
      height: 200px;
    }
  </style>
</head>
<body>
  <h1>Bitwell 1.2</h1>
  <form onsubmit="handleSubmit(event)">
    <label for="text-input">Enter Text:</label>
    <input type="text" id="text-input">
    <label for="encryption-key-input">Encryption Key:</label>
    <input type="number" id="encryption-key-input" min="0" max="255" value="0">
    <button type="submit">Convert</button>
  </form>
  <textarea id="binary-art-output" readonly></textarea>
  <a id="download-button" style="display: none;">Download Encrypted Binary Art</a>

  <h1>Decrypt Binary Art</h1>
  <form onsubmit="handleDecrypt(event)">
    <label for="binary-art-input">Enter Binary Art:</label>
    <textarea id="binary-art-input"></textarea>
    <label for="decryption-key-input">Decryption Key:</label>
    <input type="number" id="decryption-key-input" min="0" max="255" value="0">
    <button type="submit">Decrypt</button>
  </form>
  <textarea id="decrypted-text-output" readonly></textarea>

  <script>
    function convertTextToBinaryArt(text) {
      const binaryArt = [];

      for (let i = 0; i < text.length; i++) {
        const char = text.charAt(i);
        const charCode = char.charCodeAt(0);
        let binary = charCode.toString(2).padStart(8, '0');

        binary = binary.replace(/0/g, '⬛'); // Replace '0' with black square symbol
        binary = binary.replace(/1/g, '⬜'); // Replace '1' with white square symbol

        binaryArt.push(binary);
      }

      return binaryArt.join('\n');
    }

    function convertBinaryArtToText(binaryArt) {
      const lines = binaryArt.split('\n');
      let text = '';

      for (let i = 0; i < lines.length; i++) {
        const line = lines[i];
        const binaryChars = line.split(' ');
        for (let j = 0; j < binaryChars.length; j++) {
          const binaryChar = binaryChars[j];
          const binaryCode = binaryChar.replace(/⬛/g, '0').replace(/⬜/g, '1');
          const charCode = parseInt(binaryCode, 2);
          const char = String.fromCharCode(charCode);
          text += char;
        }
      }

      return text;
    }

    function handleSubmit(event) {
      event.preventDefault();
      const textInput = document.getElementById('text-input');
      const binaryArtOutput = document.getElementById('binary-art-output');
      const downloadButton = document.getElementById('download-button');
      const encryptionKeyInput = document.getElementById('encryption-key-input');

      const text = textInput.value;
      const encryptionKey = parseInt(encryptionKeyInput.value);
      const encryptedText = encryptText(text, encryptionKey);
      const binaryArt = convertTextToBinaryArt(encryptedText);

      binaryArtOutput.value = binaryArt;

      const encryptedHTML = `
        <!DOCTYPE html>
        <html>
        <head>
          <title>Encrypted Binary Art</title>
        </head>
        <body>
          <pre>${binaryArt}</pre>
        </body>
        </html>
      `;

      const blob = new Blob([encryptedHTML], { type: 'text/html' });
      const url = URL.createObjectURL(blob);
      downloadButton.href = url;
      downloadButton.download = 'encrypted_binary_art.html';
    }

    function encryptText(text, encryptionKey) {
      let encryptedText = '';
      for (let i = 0; i < text.length; i++) {
        const char = text.charAt(i);
        const charCode = char.charCodeAt(0);
        const encryptedCharCode = (charCode + encryptionKey) % 256;
        encryptedText += String.fromCharCode(encryptedCharCode);
      }
      return encryptedText;
    }

    function decryptText(text, encryptionKey) {
      let decryptedText = '';
      for (let i = 0; i < text.length; i++) {
        const char = text.charAt(i);
        const charCode = char.charCodeAt(0);
        const decryptedCharCode = (charCode - encryptionKey + 256) % 256;
        decryptedText += String.fromCharCode(decryptedCharCode);
      }
      return decryptedText;
    }

    function handleDecrypt(event) {
      event.preventDefault();
      const binaryArtInput = document.getElementById('binary-art-input');
      const decryptedTextOutput = document.getElementById('decrypted-text-output');
      const encryptionKeyInput = document.getElementById('decryption-key-input');

      const binaryArt = binaryArtInput.value;
      const encryptionKey = parseInt(encryptionKeyInput.value);
      const decryptedBinaryArt = convertBinaryArtToText(binaryArt);
      const decryptedText = decryptText(decryptedBinaryArt, encryptionKey);

      decryptedTextOutput.value = decryptedText;
    }
  </script>
</body>
</html>

    </script>
</body>
</html>
